var e131 = require('./index');

var universes = [0x01, 0x02];

var server = new e131.Server(universes);
server.on('error', function (err) {
  console.log('error: ' + err);
});
server.on('listening', function() {
  console.log('server listening on port %d, universes %j', this.port, this.universes);
});
server.on('packet', function (packet) {
  var sourceName = packet.getSourceName();
  var sequenceNumber = packet.getSequenceNumber();
  var universe = packet.getUniverse();
  var slotsData = packet.getSlotsData();

  console.log('source="%s", seq=%d, universe=%d, slots=%d',
    sourceName, sequenceNumber, universe, slotsData.length);
  console.log('slots data = %s', slotsData.toString('hex'));
});
server.on('packet-error', function(packet, err) {
  console.log('** Packet Error: %d **', err);
});
server.on('packet-out-of-order', function(packet) {
  console.log('** Packet Out Of Order (seq=%d) **', packet.getSequenceNumber());
});
